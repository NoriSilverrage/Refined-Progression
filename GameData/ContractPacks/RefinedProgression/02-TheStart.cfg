//--
//------ Refined Progression Contracts
//--

//--Contains
//ReachAtmoHigh
//EscapeAtmo
//UnmannedOrbit
//CrewedOrbit
//HighOrbit
//UMLongOrbit
//LongOrbit
//UMEscapeHomeworld
//EscapeHomeWorld




//--
//------ Starting contracts
//--


//--Reach High Altitude
CONTRACT_TYPE
{
    name = ReachAtmoHigh
	group = Refined Progression

	title = Go up past @/altkm kilometers
	description = Our scientist, RandomKerbalName(Male), seems to think that at around @/altkm kilometers the atmosphere changes. Lets see what happens.
	synopsis = Fly up past @/altkm kilometers
	completedMessage = Odd, the air seems thinner.

	agent = Experimental Astrophysics Group
	cancellable = false
	declinable = false
	minExpiry = 0
    maxExpiry = 0
	prestige = Trivial
	targetBody = HomeWorld()
	maxCompletions = 1
	maxSimultaneous = 1
	rewardScience = 5.0
	rewardReputation = 10.0 / @targetBody.Multiplier()
	rewardFunds = 16000 / @targetBody.Multiplier()
	failureFunds = 4400 / @targetBody.Multiplier()
	advanceFunds = 4000 / @targetBody.Multiplier()

	DATA
	{
		type = double
		altkm = @targetBody.FlyingAltitudeThreshold()/1000
	}

	PARAMETER
	{
		name = ReachState
		type = ReachState

		minAltitude = @targetBody.FlyingAltitudeThreshold()
	}
}

//--Escape Atmo
CONTRACT_TYPE
{
    name = EscapeAtmo
	group = Refined Progression

	title = Escape the atmosphere
	description = "Given the success of our last mission, we've been inundated with so called experts on what we should do next.
	These so called scientists think they know everything and RandomKerbalName(Male) has the audacity to claim that based on our last mission, if we keep going up eventually we will leave the atmosphere.
	
	I suppose we can't call ourselves professionals if we don't at least try. Plus, you know, they are funding us and who are we to question what they spend their funds on."
	synopsis = Go even higher...
	completedMessage = "@targetBody is so big... And uh, I guess we were wrong."
	
	agent = Experimental Astrophysics Group
	cancellable = false
	declinable = false
	minExpiry = 0
    maxExpiry = 0
	prestige = Trivial
	targetBody = HomeWorld()
	maxCompletions = 1
	maxSimultaneous = 1
	rewardScience = 8.0
	rewardReputation = 30.0 / @targetBody.Multiplier()
	rewardFunds = 24000 / @targetBody.Multiplier()
	failureFunds = 6600 / @targetBody.Multiplier()
	advanceFunds = 6000 / @targetBody.Multiplier()

	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		contractType = ReachAtmoHigh
	}

	
	PARAMETER
	{
		name = ReachState
		type = ReachState
		
		situation = SUB_ORBITAL
	}
}

//--First Unmanned Orbit
CONTRACT_TYPE
{
    name = UnmannedOrbit
	group = Refined Progression

	title = Unmanned Orbit
	description = Risking the life of RandomKerbalName(Female) doesn't seem like the best idea. So, lets try sending up a unmanned probe and get it into orbit.
	synopsis = Orbit a probe
	completedMessage = Excellent job.

	agent = Experimental Astrophysics Group

	minExpiry = 0
	maxExpiry = 0
	cancellable = false
	declinable = false
	prestige = Significant
	targetBody = HomeWorld()
	maxCompletions = 1
	maxSimultaneous = 1
	rewardScience = 8.0
	rewardReputation = 40.0 / @targetBody.Multiplier()
	rewardFunds = 32000 / @targetBody.Multiplier()
	failureFunds = 8800 / @targetBody.Multiplier()
	advanceFunds = 8000 / @targetBody.Multiplier()

	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		contractType = EscapeAtmo
	}

	
	PARAMETER
	{
		name = Orbit
		type = VesselParameterGroup
		
		title = Orbit @targetBody
		
		duration = 60m
		
		PARAMETER
		{
			name = NewVessel
			type = NewVessel
		}
		
		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			maxCrew = 0
			minCrew = 0
		}
		PARAMETER
		{
			name = Orbit
			type = Orbit
			minPeA = @targetBody.AtmosphereAltitude() * 1.1
		}
	}
}

//--First Crewed Orbit
CONTRACT_TYPE
{
    name = CrewedOrbit
	group = Refined Progression

	title = Orbit and Recovery
	description = "RandomKerbalName(Male) and RandomKerbalName(Female) are clamouring to be the first ones in orbit around @targetBody, but we can't have amateurs on such a dangerous mission."
	synopsis = Send someone into orbit and then return them
	completedMessage = Excellent job! @targetBody sure flies by fast.

	agent = Experimental Astrophysics Group
	
	minExpiry = 0
	maxExpiry = 0
	cancellable = false
	declinable = false
	prestige = Significant
	targetBody = HomeWorld()
	maxCompletions = 1
	maxSimultaneous = 1
	rewardScience = 12.0
	rewardReputation = 50.0 / @targetBody.Multiplier()
	rewardFunds = 50000 / @targetBody.Multiplier()
	failureFunds = 13750 / @targetBody.Multiplier()
	advanceFunds = 12500 / @targetBody.Multiplier()

	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		contractType = EscapeAtmo
	}
	
	PARAMETER
	{
		name = Orbit
		type = VesselParameterGroup
		define = Orbiter
		title = Orbit @targetBody
		
		duration = 60m
		
		PARAMETER
		{
			name = NewVessel
			type = NewVessel
		}
		
		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			minCrew = 1
		}
		
		PARAMETER
		{
			name = Orbit
			type = Orbit
			minPeA = @targetBody.AtmosphereAltitude() * 1.1
		}
		

	}
	
	PARAMETER
	{
		name = Home
		type = VesselParameterGroup
		vessel = Orbiter
		title = Optionally orbit for 1d, or just return home.
		completeInSequence = true
		
		PARAMETER
		{
			name = Orbit
			type = Orbit
			minPeA = @targetBody.AtmosphereAltitude() * 1.1
			
			PARAMETER
			{
				name = Duration
				type = Duration
				duration = 1d
				optional = true
				notes = A longer orbit (1 day) gives extra rewards.
				
				preWaitText = Orbiting for a additional day will provide us with some valuable data.
				waitingText = One more day should do.
				completionText = Excellent, this will be very helpful.
				rewardFunds = 6250 / @targetBody.Multiplier()
				rewardScience = 2 / @targetBody.Multiplier()
			}
		}

		PARAMETER
		{
			name = ReturnHome
			type = ReturnHome
		}
}

//--First High Orbit
CONTRACT_TYPE
{
    name = HighOrbit
	group = Refined Progression

	title = Achieve High Orbit
	description = "RandomKerbalName(Female) has posited the idea that if we obtain a orbit past @/altkm kilometers we will get different readings than that of lower orbits."
	synopsis = Orbit at @/altkm kilometers
	completedMessage = Look at that view and my are these readings interesting.

	agent = Experimental Astrophysics Group
	
	minExpiry = 426.0
	maxExpiry = 426.0
	cancellable = false
	declinable = false
	weight = 3.0
	prestige = Trivial
	targetBody = HomeWorld()
	maxCompletions = 1
	maxSimultaneous = 1
	rewardScience = 12.0
	rewardReputation = 40.0 / @targetBody.Multiplier()
	rewardFunds = 40000 / @targetBody.Multiplier()
	failureFunds = 11000 / @targetBody.Multiplier()
	advanceFunds = 10000 / @targetBody.Multiplier()

	DATA
	{
		type = double
		altkm = @targetBody.SpaceAltitudeThreshold()/1000
	}
	
	REQUIREMENT
	{
		name = Any
		type = Any
		
		REQUIREMENT
		{
			name = CompleteContract
			type = CompleteContract
			contractType = CrewedOrbit
		}
		
		REQUIREMENT
		{
			name = CompleteContract
			type = CompleteContract
			contractType = UnmannedOrbit
		}
	}
	
	
	PARAMETER
	{
		name = HighOrbit
		type = VesselParameterGroup
		define = HighOrbiter
		title = High Orbit of @targetBody
		
		duration = 120m
		
		PARAMETER
		{
			name = NewVessel
			type = NewVessel
		}
		
		PARAMETER
		{
			name = Orbit
			type = Orbit
			situation = ORBITING
			minAltitude = @targetBody.SpaceAltitudeThreshold()
		}
		
	}
	
	PARAMETER
	{
		name = Home
		type = VesselParameterGroup
		vessel = HighOrbiter
		title = Optionally orbit for 2d, or just return home.
		completeInSequence = true
		
		PARAMETER
		{
			name = Orbit
			type = Orbit
			situation = ORBITING
			minAltitude = @targetBody.SpaceAltitudeThreshold()
			
			PARAMETER
			{
				name = Duration
				type = Duration
				duration = 2d
				optional = true
				notes = A longer orbit (2 day) gives extra rewards.
				
				preWaitText = Orbiting for a additional two days will provide us with some valuable data.
				waitingText = One more day should do.
				completionText = Excellent, this will be very helpful.
				rewardFunds = 5000 / @targetBody.Multiplier()
				rewardScience = 2 / @targetBody.Multiplier()
			}
		}

		PARAMETER
		{
			name = ReturnHome
			type = ReturnHome
		}
	}


}

//--Long Orbit
CONTRACT_TYPE
{
    name = UMLongOrbit
	group = Refined Progression

	title = Two week in Space: Probe
	description = We don't know what the long term effects of being in space are. Send up a probe for 14 days to see.
	synopsis = Orbit a Probe for 14 days
	completedMessage = Well that seemed to work.

	agent = Experimental Astrophysics Group
	
	minExpiry = 426.0
	maxExpiry = 426.0
	cancellable = false
	weight = 3.0
	prestige = Trivial
	targetBody = HomeWorld()
	maxCompletions = 1
	maxSimultaneous = 1
	rewardScience = 2.0
	rewardReputation = 15.0 / @targetBody.Multiplier()
	rewardFunds = 40000 / @targetBody.Multiplier()
	failureFunds = 11000 / @targetBody.Multiplier()
	advanceFunds = 10000 / @targetBody.Multiplier()

	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		contractType = UnmannedOrbit
	}
	
	PARAMETER
	{
		name = LongOrbit
		type = VesselParameterGroup
		
		title = Orbit for 14 days
		
		duration = 14d
		
		PARAMETER
		{
			name = NewVessel
			type = NewVessel
		}
		
		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			minCrew = 0
			maxCrew = 0
		}
		
		PARAMETER
		{
			name = Orbit
			type = Orbit
			minPeA = @targetBody.AtmosphereAltitude() * 1.1
		}

	}
}

//--Long Manned Orbit
CONTRACT_TYPE
{
    name = LongOrbit
	group = Refined Progression

	title = Two weeks in Space: Manned
	description = We don't know what the long term effects of being in space are. Send up a Man for 14 days to see.
	synopsis = Orbit a manned pod for 14 days
	completedMessage = Well that seemed to work.

	agent = Experimental Astrophysics Group
	
	minExpiry = 426.0
	maxExpiry = 426.0
	cancellable = false
	declinable = false
	weight = 3.0
	prestige = Significant
	targetBody = HomeWorld()
	maxCompletions = 1
	maxSimultaneous = 1
	rewardScience = 4.0
	rewardReputation = 30.0 / @targetBody.Multiplier()
	rewardFunds = 50000 / @targetBody.Multiplier()
	failureFunds = 13750 / @targetBody.Multiplier()
	advanceFunds = 12500 / @targetBody.Multiplier()

	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		contractType = CrewedOrbit
	}
	
	PARAMETER
	{
		name = LongOrbit
		type = VesselParameterGroup
		
		title = Long manned mission
		
		duration = 14d
		
		PARAMETER
		{
			name = NewVessel
			type = NewVessel
		}
		
		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			minCrew = 1
		}
		
		PARAMETER
		{
			name = Orbit
			type = Orbit
			minPeA = @targetBody.AtmosphereAltitude() * 1.1
		}
	}
	
	PARAMETER
	{
		name = ReturnHome
		type = ReturnHome
	}
	
	BEHAVIOUR
	{
		name = AwardExperience
		type = AwardExperience
	
		parameter = LongOrbit
		experience = 2
	}
}

//--Escape the homeworld SOI - Unmanned
CONTRACT_TYPE
{
    name = UMEscapeHomeworld
	group = Refined Progression

	title = Escape "@targetBody": Probe
	description = In order to explore other planets we need to escape @targetBody gravity. Send a probe out past @targetBody sphere of influence.
	synopsis = Escape @targetBody gravitational pull.
	completedMessage = Excellent. Bye bye probe.

	agent = Experimental Astrophysics Group
	
	minExpiry = 426.0
	maxExpiry = 426.0
	cancellable = false
	declinable = false
	prestige = Trivial
	targetBody = HomeWorld()
	weight = 2.0
	maxCompletions = 1
	maxSimultaneous = 1
	rewardScience = 4.0
	rewardReputation = 15.0 / @targetBody.Multiplier()
	rewardFunds = 50000 / @targetBody.Multiplier()
	failureFunds = 13750 / @targetBody.Multiplier()
	advanceFunds = 12500 / @targetBody.Multiplier()

	REQUIREMENT
	{
		name = Any
		type = Any
		
		REQUIREMENT
		{
			name = CompleteContract
			type = CompleteContract
			contractType = UMLongOrbit
		}
		
		REQUIREMENT
		{
			name = CompleteContract
			type = CompleteContract
			contractType = HighOrbit
		}
	}
	
	PARAMETER
	{
		name = UMEsc
		type = VesselParameterGroup
		title = Escape @targetBody
		
		PARAMETER
		{
			name = NewVessel
			type = NewVessel
		}
		
		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			minCrew = 0
			maxCrew = 0
		}
		PARAMETER
		{
			name = ReachState
			type = ReachState
			situation = ESCAPING
			
			minAltitude = @targetBody.SphereOfInfluence() - 100000
		}
	}
}


//--Escape Kerbin's SOI Manned
CONTRACT_TYPE
{
    name = EscapeHomeWorld
	group = Refined Progression

	title = Escape "@targetBody": Manned
	description = In order to explore other planets we need escape @targetBody gravity. Send a crewed ship out past @targetBody sphere of influence.
	synopsis = Escape @targetBody gravitational pull.
	completedMessage = Excellent. Now how do we get back?

	agent = Experimental Astrophysics Group
	
	minExpiry = 426.0
	maxExpiry = 426.0
	cancellable = false
	declinable = false
	prestige = Significant
	targetBody = HomeWorld()
	weight = 2.0
	maxCompletions = 1
	maxSimultaneous = 1
	rewardScience = 4.0
	rewardReputation = 15.0 / @targetBody.Multiplier()
	rewardFunds = 50000 / @targetBody.Multiplier()
	failureFunds = 13750 / @targetBody.Multiplier()
	advanceFunds = 12500 / @targetBody.Multiplier()

	REQUIREMENT
	{
		name = Any
		type = Any
		
		REQUIREMENT
		{
			name = CompleteContract
			type = CompleteContract
			contractType = LongOrbit
		}
		
		REQUIREMENT
		{
			name = CompleteContract
			type = CompleteContract
			contractType = HighOrbit
		}
	}
	
	PARAMETER
	{
		name = Esc
		type = VesselParameterGroup
		title = Manned Escape
		
		PARAMETER
		{
			name = NewVessel
			type = NewVessel
		}
		
		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			minCrew = 1
		}
		PARAMETER
		{
			name = ReachState
			type = ReachState
			situation = ESCAPING
			
			minAltitude = @targetBody.SphereOfInfluence() - 100000
		}
	}
}
